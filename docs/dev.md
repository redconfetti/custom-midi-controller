# Development

## VSCode

The Arduino IDE is designed to be less daunting for non-tech-related folks, so
it is limited in the options it provides.

If you want more abilities when developing, you can use [VSCode][] to develop
sketches.

[How to Use VS Code for Creating and Uploading Arduino Sketches]

* [Arduino CLI]

[VSCode]: https://code.visualstudio.com/
[How to Use VS Code for Creating and Uploading Arduino Sketches]: https://www.circuitstate.com/tutorials/how-to-use-vs-code-for-creating-and-uploading-arduino-sketches/
[Arduino CLI]: https://arduino.github.io/arduino-cli/0.34/

## Arduino for VS-Code

Install the following recommended extensions for VSCode:

* [Arduino Community Edition][]
* C/C++
* C/C++ Extension Pack
* Serial Monitor

This Arduino extension relies on the [Arduino Command-Line Interface (CLI)][]
tool. It should prompt you to use a bundled version of the tool after you try to
run the first command with it. This may work for you, but on a Mac I had more
success by installing the Arduino-CLI and then configuring the path in the
VS Code settings for "Arduino: Path".

```bash
# Install Arduino CLI for Mac
$ brew install arduino-cli

# Get Path to Arduino-CLI to configure in VS Code Settings
$ which arduino-cli
/opt/homebrew/bin/arduino-cli
```

In VSCode, the functional Arduino commands are available from a menu in VSCode
that is accessed using F1, Ctrl + Shift + P, or Cmd + Shift + P (Mac).
From this menu type "Arduino" and the list of related commands will show.

Here are some commands for Arduino-CLI.

```bash
# view arduino-cli configuration
$ arduino-cli config dump

# initialize arduino-cli configuration
$ arduino-cli config init
Config file written to: /Users/jason/Library/Arduino15/arduino-cli.yaml

# list libraries installed
arduino-cli lib list
```

[Arduino Community Edition]: https://marketplace.visualstudio.com/items?itemName=vscode-arduino.vscode-arduino-community
[Arduino Command-Line Interface (CLI)]: https://www.arduino.cc/pro/software-pro-cli/

### VSCode Issues

The C/C++ Extension required by the Arduino extension will trigger warnings
and errors in the 'Output' panel in VSCode such as:

[#include errors detected. Please update your includePath]

[#include errors detected. Please update your includePath]: https://stackoverflow.com/questions/51227662/vscode-include-errors-detected-please-update-your-includepath

Once you successfully run the Verify for a sketch with no errors, a file named
c_cpp_properties.json should be generated by the Arduino extension which will
bring in a proper configuration for your environment.

## Wokwi

We are using the [Wokwi for VS Code][] extension, provided by the [Wokwi]
platform, to support a virtual prototype of the MIDI Controller.

Wokwi enables developers to simulate the behavior of common microcontrollers
such as the Arduino, ESP32, STM32, and Raspberry Pi Pico.

* [Wokwi - Project Config][]
* [Wokwi Docs][]

[Wokwi]: https://wokwi.com/
[Wokwi for VS Code]: https://docs.wokwi.com/vscode/getting-started
[Wokwi - Project Config]: https://docs.wokwi.com/vscode/project-config
[Wokwi Docs]: https://docs.wokwi.com/

## C Programming Notes

### C PreProcessor

* [C Define PreProcessor]
* [C IfDef/EndIf]

```c
#define YEARS_OLD 6

function potentiometer() {
  // macros do not need to be unindented
  #ifdef YEARS_OLD
    Serial.print("Augustus Corgan is over %d years old.\n", YEARS_OLD);
  #endif
}
```

[C Define PreProcessor]: https://www.geeksforgeeks.org/c-define-preprocessor/
[C IfDef/EndIf]: https://www.techonthenet.com/c_language/directives/ifdef.php
